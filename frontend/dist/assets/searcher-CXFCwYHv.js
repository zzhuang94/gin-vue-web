import{d as N,r as x,X as j,c as E,w as F,i as I,a as p,o as n,g as o,k as t,Z as d,F as b,U as y,n as K,t as v,b as f,Q as L,R as T,e as m,V as M,l as Q,Y as R}from"./index-BxxORUsx.js";import{_ as X}from"./ajax-select.vue_vue_type_script_setup_true_lang-B9fWBBk4.js";import{a as Y,_ as Z}from"./index-B_zMYfd8.js";import{S as q}from"./index-Dcvj4EWx.js";import{S as A,a as G}from"./index-ASOjCofh.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Col-BWTf8d8J.js";import"./responsiveObserve-BSVpK3CT.js";import"./useFlexGapSupport-Bw9fdAbJ.js";import"./Trigger-CbKhCWPh.js";import"./Overflow-Bt0oFqbf.js";import"./List-DcOEHIzi.js";import"./isMobile--2fOlCHx.js";import"./useMemo-DyBymjoj.js";import"./useMergedState-BtTDcyNi.js";import"./move-DqwuXz-F.js";import"./slide-uqFNZPWz.js";const J={class:"searcher"},P=["onClick"],W=N({__name:"searcher",props:{rules:{},arg:{},bind:{}},emits:["update:arg","search","clear"],setup(C,{emit:U}){const _=C,h=U,g=x(""),$=a=>{g.value=a},r=x(new Set),s=j(_.arg),u=E(()=>_.rules.filter(a=>a.search)),S=()=>{r.value.clear();for(const a of u.value)_.arg&&_.arg[a.key]!==void 0&&r.value.add(a.key);r.value.size===0&&u.value.length>0&&u.value[0]&&r.value.add(u.value[0].key)},B=a=>{r.value.has(a)?(r.value.delete(a),delete s[a]):r.value.add(a)};F(s,a=>{h("update:arg",a)});const V=()=>{Object.keys(s).forEach(a=>{delete s[a]}),S(),h("clear")};return I(S),(a,c)=>{const i=Z,w=q,k=Y,z=G,O=A,D=R;return n(),p("div",J,[o(k,{align:"middle"},{default:t(()=>[o(i,{span:2,class:"label"},{default:t(()=>[...c[1]||(c[1]=[d("筛选条件：",-1)])]),_:1}),o(i,{span:22},{default:t(()=>[o(w,{size:4},{default:t(()=>[(n(!0),p(b,null,y(u.value,e=>(n(),p("label",{key:e.key,onClick:l=>B(e.key),class:K(["btn btn-sm",r.value.has(e.key)?"btn-success":"btn-default"])},v(e.name),11,P))),128))]),_:1})]),_:1})]),_:1}),(n(!0),p(b,null,y(u.value,e=>L((n(),m(k,{align:"middle",key:e.key},{default:t(()=>[o(i,{span:2,class:"label"},{default:t(()=>[d(v(e.name)+"：",1)]),_:2},1024),o(i,{span:22},{default:t(()=>[e.limit&&e.limit.length?(n(),m(O,{key:0,value:s[e.key],"onUpdate:value":l=>s[e.key]=l,"show-search":"","allow-clear":"","search-value":g.value,onSearch:$,filterOption:M(Q).filterByLabel,placeholder:`请选择${e.name}`,mode:typeof e.search=="number"&&e.search===3?"multiple":void 0,class:"search-input"},{default:t(()=>[(n(!0),p(b,null,y(e.limit,l=>(n(),m(z,{key:l.key,value:l.key,label:l.label},{default:t(()=>[d(v(l.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["value","onUpdate:value","search-value","filterOption","placeholder","mode"])):e.trans&&e.trans.ajax?(n(),m(X,{key:1,value:s[e.key],"onUpdate:value":l=>s[e.key]=l,placeholder:`请选择${e.name}`,translate:e.trans,class:"search-input"},null,8,["value","onUpdate:value","placeholder","translate"])):(n(),m(D,{key:2,value:s[e.key],"onUpdate:value":l=>s[e.key]=l,placeholder:`请输入${e.name}`,class:"search-input"},null,8,["value","onUpdate:value","placeholder"]))]),_:2},1024)]),_:2},1024)),[[T,r.value.has(e.key)]])),128)),o(k,null,{default:t(()=>[o(i,{span:2}),o(i,{span:22},{default:t(()=>[o(w,{size:4},{default:t(()=>[f("button",{class:"btn btn-sm btn-primary",onClick:c[0]||(c[0]=e=>h("search"))},[...c[2]||(c[2]=[f("i",{class:"fa fa-search"},null,-1),d(" 搜 索 ",-1)])]),f("button",{class:"btn btn-sm btn-secondary",onClick:V},[...c[3]||(c[3]=[f("i",{class:"fa fa-refresh"},null,-1),d(" 重 置 ",-1)])])]),_:1})]),_:1})]),_:1})])}}}),ke=H(W,[["__scopeId","data-v-d9e00340"]]);export{ke as default};
