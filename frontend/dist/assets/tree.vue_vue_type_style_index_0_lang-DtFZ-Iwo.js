import{M as W,N as we,d as Ce,be as ln,c as I,bg as rn,g as L,P as ke,ca as sn,z as $,X as cn,bO as jn,i as dn,b0 as un,bl as fn,G as ee,E as he,av as Ye,cC as Fn,aC as wt,r as ie,w as ce,a$ as Ct,j as Bn,T as Hn,Q as Rn,R as zn,F as bt,C as Ot,bo as Lt,b2 as Vn,bm as De,br as Te,bt as Un,L as Gn,bi as qn,x as Wn,y as Xn,A as Yn,bH as Qn,bQ as At,D as vn,O as Zn,q as Ue,v as ve,aG as Jn,bU as $e,u as mt,a as Me,o as xe,e as ut,f as Mt,at as eo,k as _e,cD as to,cE as no,cF as oo,b as Ge,n as jt,m as ao,V as lo,p as ft,Z as Ft,t as Bt,U as ro}from"./index-BxxORUsx.js";import{_ as io}from"./tooltip.vue_vue_type_script_setup_true_lang-CPCjtLku.js";import{D as so}from"./index-OYXSW3Ca.js";import{M as co,_ as uo}from"./index-DE97z1Zb.js";import{L as fo}from"./List-DcOEHIzi.js";import{c as vo,g as yo}from"./collapseMotion-D2kUzJ6C.js";import{g as ho}from"./index-CTFYvFdB.js";import{d as po}from"./debounce--UTMqZ4X.js";function ye(e){const t=W();return we(()=>{t.value=e()},{flush:"sync"}),t}const yn=Symbol("TreeContextKey"),go=Ce({compatConfig:{MODE:3},name:"TreeContext",props:{value:{type:Object}},setup(e,t){let{slots:n}=t;return ln(yn,I(()=>e.value)),()=>{var o;return(o=n.default)===null||o===void 0?void 0:o.call(n)}}}),Et=()=>rn(yn,I(()=>({}))),hn=Symbol("KeysStateKey"),bo=e=>{ln(hn,e)},pn=()=>rn(hn,{expandedKeys:W([]),selectedKeys:W([]),loadedKeys:W([]),loadingKeys:W([]),checkedKeys:W([]),halfCheckedKeys:W([]),expandedKeysSet:I(()=>new Set),selectedKeysSet:I(()=>new Set),loadedKeysSet:I(()=>new Set),loadingKeysSet:I(()=>new Set),checkedKeysSet:I(()=>new Set),halfCheckedKeysSet:I(()=>new Set),flattenNodes:W([])}),mo=e=>{let{prefixCls:t,level:n,isStart:o,isEnd:a}=e;const r=`${t}-indent-unit`,l=[];for(let i=0;i<n;i+=1)l.push(L("span",{key:i,class:{[r]:!0,[`${r}-start`]:o[i],[`${r}-end`]:a[i]}},null));return L("span",{"aria-hidden":"true",class:`${t}-indent`},[l])},gn={eventKey:[String,Number],prefixCls:String,title:ke.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:ke.any,switcherIcon:ke.any,domRef:{type:Function}},ko={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},bn=()=>({prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:ke.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:ke.any,selectable:{type:Boolean,default:void 0},expandAction:[String,Boolean],disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:ke.any,switcherIcon:ke.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String},rootClassName:String,rootStyle:Object});var Ko=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Ht="open",Rt="close",xo="---",kt=Ce({compatConfig:{MODE:3},name:"ATreeNode",inheritAttrs:!1,props:gn,isTreeNode:1,setup(e,t){let{attrs:n,slots:o,expose:a}=t;sn(!("slots"in e.data),`treeData slots is deprecated, please use ${Object.keys(e.data.slots||{}).map(s=>"`v-slot:"+s+"` ")}instead`);const r=W(!1),l=Et(),{expandedKeysSet:i,selectedKeysSet:y,loadedKeysSet:h,loadingKeysSet:p,checkedKeysSet:f,halfCheckedKeysSet:S}=pn(),{dragOverNodeKey:w,dropPosition:P,keyEntities:m}=l.value,d=I(()=>qe(e.eventKey,{expandedKeysSet:i.value,selectedKeysSet:y.value,loadedKeysSet:h.value,loadingKeysSet:p.value,checkedKeysSet:f.value,halfCheckedKeysSet:S.value,dragOverNodeKey:w,dropPosition:P,keyEntities:m})),k=ye(()=>d.value.expanded),O=ye(()=>d.value.selected),K=ye(()=>d.value.checked),E=ye(()=>d.value.loaded),x=ye(()=>d.value.loading),C=ye(()=>d.value.halfChecked),T=ye(()=>d.value.dragOver),M=ye(()=>d.value.dragOverGapTop),c=ye(()=>d.value.dragOverGapBottom),_=ye(()=>d.value.pos),B=W(),Y=I(()=>{const{eventKey:s}=e,{keyEntities:g}=l.value,{children:V}=g[s]||{};return!!(V||[]).length}),G=I(()=>{const{isLeaf:s}=e,{loadData:g}=l.value,V=Y.value;return s===!1?!1:s||!g&&!V||g&&E.value&&!V}),Z=I(()=>G.value?null:k.value?Ht:Rt),J=I(()=>{const{disabled:s}=e,{disabled:g}=l.value;return!!(g||s)}),de=I(()=>{const{checkable:s}=e,{checkable:g}=l.value;return!g||s===!1?!1:g}),te=I(()=>{const{selectable:s}=e,{selectable:g}=l.value;return typeof s=="boolean"?s:g}),j=I(()=>{const{data:s,active:g,checkable:V,disableCheckbox:Q,disabled:ne,selectable:oe}=e;return $($({active:g,checkable:V,disableCheckbox:Q,disabled:ne,selectable:oe},s),{dataRef:s,data:s,isLeaf:G.value,checked:K.value,expanded:k.value,loading:x.value,selected:O.value,halfChecked:C.value})}),ue=jn(),X=I(()=>{const{eventKey:s}=e,{keyEntities:g}=l.value,{parent:V}=g[s]||{};return $($({},We($({},e,d.value))),{parent:V})}),ae=cn({eventData:X,eventKey:I(()=>e.eventKey),selectHandle:B,pos:_,key:ue.vnode.key});a(ae);const se=s=>{const{onNodeDoubleClick:g}=l.value;g(s,X.value)},pe=s=>{if(J.value)return;const{onNodeSelect:g}=l.value;s.preventDefault(),g(s,X.value)},Oe=s=>{if(J.value)return;const{disableCheckbox:g}=e,{onNodeCheck:V}=l.value;if(!de.value||g)return;s.preventDefault();const Q=!K.value;V(s,X.value,Q)},Pe=s=>{const{onNodeClick:g}=l.value;g(s,X.value),te.value?pe(s):Oe(s)},Ie=s=>{const{onNodeMouseEnter:g}=l.value;g(s,X.value)},Je=s=>{const{onNodeMouseLeave:g}=l.value;g(s,X.value)},et=s=>{const{onNodeContextMenu:g}=l.value;g(s,X.value)},tt=s=>{const{onNodeDragStart:g}=l.value;s.stopPropagation(),r.value=!0,g(s,ae);try{s.dataTransfer.setData("text/plain","")}catch{}},nt=s=>{const{onNodeDragEnter:g}=l.value;s.preventDefault(),s.stopPropagation(),g(s,ae)},ot=s=>{const{onNodeDragOver:g}=l.value;s.preventDefault(),s.stopPropagation(),g(s,ae)},Fe=s=>{const{onNodeDragLeave:g}=l.value;s.stopPropagation(),g(s,ae)},at=s=>{const{onNodeDragEnd:g}=l.value;s.stopPropagation(),r.value=!1,g(s,ae)},lt=s=>{const{onNodeDrop:g}=l.value;s.preventDefault(),s.stopPropagation(),r.value=!1,g(s,ae)},Be=s=>{const{onNodeExpand:g}=l.value;x.value||g(s,X.value)},He=()=>{const{data:s}=e,{draggable:g}=l.value;return!!(g&&(!g.nodeDraggable||g.nodeDraggable(s)))},Re=()=>{const{draggable:s,prefixCls:g}=l.value;return s&&s?.icon?L("span",{class:`${g}-draggable-icon`},[s.icon]):null},rt=()=>{var s,g,V;const{switcherIcon:Q=o.switcherIcon||((s=l.value.slots)===null||s===void 0?void 0:s[(V=(g=e.data)===null||g===void 0?void 0:g.slots)===null||V===void 0?void 0:V.switcherIcon])}=e,{switcherIcon:ne}=l.value,oe=Q||ne;return typeof oe=="function"?oe(j.value):oe},ze=()=>{const{loadData:s,onNodeLoad:g}=l.value;x.value||s&&k.value&&!G.value&&!Y.value&&!E.value&&g(X.value)};dn(()=>{ze()}),un(()=>{ze()});const it=()=>{const{prefixCls:s}=l.value,g=rt();if(G.value)return g!==!1?L("span",{class:he(`${s}-switcher`,`${s}-switcher-noop`)},[g]):null;const V=he(`${s}-switcher`,`${s}-switcher_${k.value?Ht:Rt}`);return g!==!1?L("span",{onClick:Be,class:V},[g]):null},st=()=>{var s,g;const{disableCheckbox:V}=e,{prefixCls:Q}=l.value,ne=J.value;return de.value?L("span",{class:he(`${Q}-checkbox`,K.value&&`${Q}-checkbox-checked`,!K.value&&C.value&&`${Q}-checkbox-indeterminate`,(ne||V)&&`${Q}-checkbox-disabled`),onClick:Oe},[(g=(s=l.value).customCheckable)===null||g===void 0?void 0:g.call(s)]):null},Ve=()=>{const{prefixCls:s}=l.value;return L("span",{class:he(`${s}-iconEle`,`${s}-icon__${Z.value||"docu"}`,x.value&&`${s}-icon_loading`)},null)},Ee=()=>{const{disabled:s,eventKey:g}=e,{draggable:V,dropLevelOffset:Q,dropPosition:ne,prefixCls:oe,indent:u,dropIndicatorRender:v,dragOverNodeKey:b,direction:D}=l.value;return!s&&V!==!1&&b===g?v({dropPosition:ne,dropLevelOffset:Q,indent:u,prefixCls:oe,direction:D}):null},ct=()=>{var s,g,V,Q,ne,oe;const{icon:u=o.icon,data:v}=e,b=o.title||((s=l.value.slots)===null||s===void 0?void 0:s[(V=(g=e.data)===null||g===void 0?void 0:g.slots)===null||V===void 0?void 0:V.title])||((Q=l.value.slots)===null||Q===void 0?void 0:Q.title)||e.title,{prefixCls:D,showIcon:F,icon:A,loadData:N}=l.value,R=J.value,q=`${D}-node-content-wrapper`;let H;if(F){const le=u||((ne=l.value.slots)===null||ne===void 0?void 0:ne[(oe=v?.slots)===null||oe===void 0?void 0:oe.icon])||A;H=le?L("span",{class:he(`${D}-iconEle`,`${D}-icon__customize`)},[typeof le=="function"?le(j.value):le]):Ve()}else N&&x.value&&(H=Ve());let z;typeof b=="function"?z=b(j.value):z=b,z=z===void 0?xo:z;const U=L("span",{class:`${D}-title`},[z]);return L("span",{ref:B,title:typeof b=="string"?b:"",class:he(`${q}`,`${q}-${Z.value||"normal"}`,!R&&(O.value||r.value)&&`${D}-node-selected`),onMouseenter:Ie,onMouseleave:Je,onContextmenu:et,onClick:Pe,onDblclick:se},[H,U,Ee()])};return()=>{const s=$($({},e),n),{eventKey:g,isLeaf:V,isStart:Q,isEnd:ne,domRef:oe,active:u,data:v,onMousemove:b,selectable:D}=s,F=Ko(s,["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"]),{prefixCls:A,filterTreeNode:N,keyEntities:R,dropContainerKey:q,dropTargetKey:H,draggingNodeKey:z}=l.value,U=J.value,le=fn(F,{aria:!0,data:!0}),{level:ge}=R[g]||{},fe=ne[ne.length-1],re=He(),Ke=!U&&re,Le=z===g,dt=D!==void 0?{"aria-selected":!!D}:void 0;return L("div",ee(ee({ref:oe,class:he(n.class,`${A}-treenode`,{[`${A}-treenode-disabled`]:U,[`${A}-treenode-switcher-${k.value?"open":"close"}`]:!V,[`${A}-treenode-checkbox-checked`]:K.value,[`${A}-treenode-checkbox-indeterminate`]:C.value,[`${A}-treenode-selected`]:O.value,[`${A}-treenode-loading`]:x.value,[`${A}-treenode-active`]:u,[`${A}-treenode-leaf-last`]:fe,[`${A}-treenode-draggable`]:Ke,dragging:Le,"drop-target":H===g,"drop-container":q===g,"drag-over":!U&&T.value,"drag-over-gap-top":!U&&M.value,"drag-over-gap-bottom":!U&&c.value,"filter-node":N&&N(X.value)}),style:n.style,draggable:Ke,"aria-grabbed":Le,onDragstart:Ke?tt:void 0,onDragenter:re?nt:void 0,onDragover:re?ot:void 0,onDragleave:re?Fe:void 0,onDrop:re?lt:void 0,onDragend:re?at:void 0,onMousemove:b},dt),le),[L(mo,{prefixCls:A,level:ge,isStart:Q,isEnd:ne},null),Re(),it(),st(),ct()])}}});function be(e,t){if(!e)return[];const n=e.slice(),o=n.indexOf(t);return o>=0&&n.splice(o,1),n}function Se(e,t){const n=(e||[]).slice();return n.indexOf(t)===-1&&n.push(t),n}function Nt(e){return e.split("-")}function mn(e,t){return`${e}-${t}`}function So(e){return e&&e.type&&e.type.isTreeNode}function wo(e,t){const n=[],o=t[e];function a(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(l=>{let{key:i,children:y}=l;n.push(i),a(y)})}return a(o.children),n}function Co(e){if(e.parent){const t=Nt(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function Oo(e){const t=Nt(e.pos);return Number(t[t.length-1])===0}function zt(e,t,n,o,a,r,l,i,y,h){var p;const{clientX:f,clientY:S}=e,{top:w,height:P}=e.target.getBoundingClientRect(),d=((h==="rtl"?-1:1)*((a?.x||0)-f)-12)/o;let k=i[n.eventKey];if(S<w+P/2){const _=l.findIndex(G=>G.key===k.key),B=_<=0?0:_-1,Y=l[B].key;k=i[Y]}const O=k.key,K=k,E=k.key;let x=0,C=0;if(!y.has(O))for(let _=0;_<d&&Co(k);_+=1)k=k.parent,C+=1;const T=t.eventData,M=k.node;let c=!0;return Oo(k)&&k.level===0&&S<w+P/2&&r({dragNode:T,dropNode:M,dropPosition:-1})&&k.key===n.eventKey?x=-1:(K.children||[]).length&&y.has(E)?r({dragNode:T,dropNode:M,dropPosition:0})?x=0:c=!1:C===0?d>-1.5?r({dragNode:T,dropNode:M,dropPosition:1})?x=1:c=!1:r({dragNode:T,dropNode:M,dropPosition:0})?x=0:r({dragNode:T,dropNode:M,dropPosition:1})?x=1:c=!1:r({dragNode:T,dropNode:M,dropPosition:1})?x=1:c=!1,{dropPosition:x,dropLevelOffset:C,dropTargetKey:k.key,dropTargetPos:k.pos,dragOverNodeKey:E,dropContainerKey:x===0?null:((p=k.parent)===null||p===void 0?void 0:p.key)||null,dropAllowed:c}}function Vt(e,t){if(!e)return;const{multiple:n}=t;return n?e.slice():e.length?[e[0]]:e}function vt(e){if(!e)return null;let t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(typeof e=="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return null;return t}function Kt(e,t){const n=new Set;function o(a){if(n.has(a))return;const r=t[a];if(!r)return;n.add(a);const{parent:l,node:i}=r;i.disabled||l&&o(l.key)}return(e||[]).forEach(a=>{o(a)}),[...n]}var Eo=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};function je(e,t){return e??t}function Qe(e){const{title:t,_title:n,key:o,children:a}=e||{},r=t||"title";return{title:r,_title:n||[r],key:o||"key",children:a||"children"}}function xt(e){function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ye(n).map(a=>{var r,l,i,y;if(!So(a))return null;const h=a.children||{},p=a.key,f={};for(const[_,B]of Object.entries(a.props))f[Fn(_)]=B;const{isLeaf:S,checkable:w,selectable:P,disabled:m,disableCheckbox:d}=f,k={isLeaf:S||S===""||void 0,checkable:w||w===""||void 0,selectable:P||P===""||void 0,disabled:m||m===""||void 0,disableCheckbox:d||d===""||void 0},O=$($({},f),k),{title:K=(r=h.title)===null||r===void 0?void 0:r.call(h,O),icon:E=(l=h.icon)===null||l===void 0?void 0:l.call(h,O),switcherIcon:x=(i=h.switcherIcon)===null||i===void 0?void 0:i.call(h,O)}=f,C=Eo(f,["title","icon","switcherIcon"]),T=(y=h.default)===null||y===void 0?void 0:y.call(h),M=$($($({},C),{title:K,icon:E,switcherIcon:x,key:p,isLeaf:S}),k),c=t(T);return c.length&&(M.children=c),M})}return t(e)}function No(e,t,n){const{_title:o,key:a,children:r}=Qe(n),l=new Set(t===!0?[]:t),i=[];function y(h){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return h.map((f,S)=>{const w=mn(p?p.pos:"0",S),P=je(f[a],w);let m;for(let k=0;k<o.length;k+=1){const O=o[k];if(f[O]!==void 0){m=f[O];break}}const d=$($({},wt(f,[...o,a,r])),{title:m,key:P,parent:p,pos:w,children:null,data:f,isStart:[...p?p.isStart:[],S===0],isEnd:[...p?p.isEnd:[],S===h.length-1]});return i.push(d),t===!0||l.has(P)?d.children=y(f[r]||[],d):d.children=[],d})}return y(e),i}function Po(e,t,n){let o={};typeof n=="object"?o=n:o={externalGetKey:n},o=o||{};const{childrenPropName:a,externalGetKey:r,fieldNames:l}=o,{key:i,children:y}=Qe(l),h=a||y;let p;r?typeof r=="string"?p=S=>S[r]:typeof r=="function"&&(p=S=>r(S)):p=(S,w)=>je(S[i],w);function f(S,w,P,m){const d=S?S[h]:e,k=S?mn(P.pos,w):"0",O=S?[...m,S]:[];if(S){const K=p(S,k),E={node:S,index:w,pos:k,key:K,parentPos:P.node?P.pos:null,level:P.level+1,nodes:O};t(E)}d&&d.forEach((K,E)=>{f(K,E,{node:S,pos:k,level:P?P.level+1:-1},O)})}f(null)}function kn(e){let{initWrapper:t,processEntity:n,onProcessFinished:o,externalGetKey:a,childrenPropName:r,fieldNames:l}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const y=a||i,h={},p={};let f={posEntities:h,keyEntities:p};return t&&(f=t(f)||f),Po(e,S=>{const{node:w,index:P,pos:m,key:d,parentPos:k,level:O,nodes:K}=S,E={node:w,nodes:K,index:P,key:d,pos:m,level:O},x=je(d,m);h[m]=E,p[x]=E,E.parent=h[k],E.parent&&(E.parent.children=E.parent.children||[],E.parent.children.push(E)),n&&n(E,f)},{externalGetKey:y,childrenPropName:r,fieldNames:l}),o&&o(f),f}function qe(e,t){let{expandedKeysSet:n,selectedKeysSet:o,loadedKeysSet:a,loadingKeysSet:r,checkedKeysSet:l,halfCheckedKeysSet:i,dragOverNodeKey:y,dropPosition:h,keyEntities:p}=t;const f=p[e];return{eventKey:e,expanded:n.has(e),selected:o.has(e),loaded:a.has(e),loading:r.has(e),checked:l.has(e),halfChecked:i.has(e),pos:String(f?f.pos:""),parent:f.parent,dragOver:y===e&&h===0,dragOverGapTop:y===e&&h===-1,dragOverGapBottom:y===e&&h===1}}function We(e){const{data:t,expanded:n,selected:o,checked:a,loaded:r,loading:l,halfChecked:i,dragOver:y,dragOverGapTop:h,dragOverGapBottom:p,pos:f,active:S,eventKey:w}=e,P=$($({dataRef:t},t),{expanded:n,selected:o,checked:a,loaded:r,loading:l,halfChecked:i,dragOver:y,dragOverGapTop:h,dragOverGapBottom:p,pos:f,active:S,eventKey:w,key:w});return"props"in P||Object.defineProperty(P,"props",{get(){return e}}),P}function Kn(e,t){const n=new Set;return e.forEach(o=>{t.has(o)||n.add(o)}),n}function Do(e){const{disabled:t,disableCheckbox:n,checkable:o}=e||{};return!!(t||n)||o===!1}function $o(e,t,n,o){const a=new Set(e),r=new Set;for(let i=0;i<=n;i+=1)(t.get(i)||new Set).forEach(h=>{const{key:p,node:f,children:S=[]}=h;a.has(p)&&!o(f)&&S.filter(w=>!o(w.node)).forEach(w=>{a.add(w.key)})});const l=new Set;for(let i=n;i>=0;i-=1)(t.get(i)||new Set).forEach(h=>{const{parent:p,node:f}=h;if(o(f)||!h.parent||l.has(h.parent.key))return;if(o(h.parent.node)){l.add(p.key);return}let S=!0,w=!1;(p.children||[]).filter(P=>!o(P.node)).forEach(P=>{let{key:m}=P;const d=a.has(m);S&&!d&&(S=!1),!w&&(d||r.has(m))&&(w=!0)}),S&&a.add(p.key),w&&r.add(p.key),l.add(p.key)});return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Kn(r,a))}}function _o(e,t,n,o,a){const r=new Set(e);let l=new Set(t);for(let y=0;y<=o;y+=1)(n.get(y)||new Set).forEach(p=>{const{key:f,node:S,children:w=[]}=p;!r.has(f)&&!l.has(f)&&!a(S)&&w.filter(P=>!a(P.node)).forEach(P=>{r.delete(P.key)})});l=new Set;const i=new Set;for(let y=o;y>=0;y-=1)(n.get(y)||new Set).forEach(p=>{const{parent:f,node:S}=p;if(a(S)||!p.parent||i.has(p.parent.key))return;if(a(p.parent.node)){i.add(f.key);return}let w=!0,P=!1;(f.children||[]).filter(m=>!a(m.node)).forEach(m=>{let{key:d}=m;const k=r.has(d);w&&!k&&(w=!1),!P&&(k||l.has(d))&&(P=!0)}),w||r.delete(f.key),P&&l.add(f.key),i.add(f.key)});return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(Kn(l,r))}}function yt(e,t,n,o,a,r){let l;l=Do;const i=new Set(e.filter(h=>!!n[h]));let y;return t===!0?y=$o(i,a,o,l):y=_o(i,t.halfCheckedKeys,a,o,l),y}function To(e){const t=ie(0),n=W();return we(()=>{const o=new Map;let a=0;const r=e.value||{};for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const i=r[l],{level:y}=i;let h=o.get(y);h||(h=new Set,o.set(y,h)),h.add(i),a=Math.max(a,y)}t.value=a,n.value=o}),{maxLevel:t,levelEntities:n}}var Ut=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Io=Ce({compatConfig:{MODE:3},name:"MotionTreeNode",inheritAttrs:!1,props:$($({},gn),{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),setup(e,t){let{attrs:n,slots:o}=t;const a=W(!0),r=Et(),l=W(!1),i=I(()=>e.motion?e.motion:vo()),y=(h,p)=>{var f,S,w,P;p==="appear"?(S=(f=i.value)===null||f===void 0?void 0:f.onAfterEnter)===null||S===void 0||S.call(f,h):p==="leave"&&((P=(w=i.value)===null||w===void 0?void 0:w.onAfterLeave)===null||P===void 0||P.call(w,h)),l.value||e.onMotionEnd(),l.value=!0};return ce(()=>e.motionNodes,()=>{e.motionNodes&&e.motionType==="hide"&&a.value&&Ct(()=>{a.value=!1})},{immediate:!0,flush:"post"}),dn(()=>{e.motionNodes&&e.onMotionStart()}),Bn(()=>{e.motionNodes&&y()}),()=>{const{motion:h,motionNodes:p,motionType:f,active:S,eventKey:w}=e,P=Ut(e,["motion","motionNodes","motionType","active","eventKey"]);return p?L(Hn,ee(ee({},i.value),{},{appear:f==="show",onAfterAppear:m=>y(m,"appear"),onAfterLeave:m=>y(m,"leave")}),{default:()=>[Rn(L("div",{class:`${r.value.prefixCls}-treenode-motion`},[p.map(m=>{const d=Ut(m.data,[]),{title:k,key:O,isStart:K,isEnd:E}=m;return delete d.children,L(kt,ee(ee({},d),{},{title:k,active:S,data:m.data,key:O,eventKey:O,isStart:K,isEnd:E}),o)})]),[[zn,a.value]])]}):L(kt,ee(ee({class:n.class,style:n.style},P),{},{active:S,eventKey:w}),o)}}});function Lo(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=e.length,o=t.length;if(Math.abs(n-o)!==1)return{add:!1,key:null};function a(r,l){const i=new Map;r.forEach(h=>{i.set(h,!0)});const y=l.filter(h=>!i.has(h));return y.length===1?y[0]:null}return n<o?{add:!0,key:a(e,t)}:{add:!1,key:a(t,e)}}function Gt(e,t,n){const o=e.findIndex(l=>l.key===n),a=e[o+1],r=t.findIndex(l=>l.key===n);if(a){const l=t.findIndex(i=>i.key===a.key);return t.slice(r+1,l)}return t.slice(r+1)}var qt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Wt={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ao=()=>{},Ne=`RC_TREE_MOTION_${Math.random()}`,St={key:Ne},xn={key:Ne,level:0,index:0,pos:"0",node:St,nodes:[St]},Xt={parent:null,children:[],pos:xn.pos,data:St,title:null,key:Ne,isStart:[],isEnd:[]};function Yt(e,t,n,o){return t===!1||!n?e:e.slice(0,Math.ceil(n/o)+1)}function Qt(e){const{key:t,pos:n}=e;return je(t,n)}function Mo(e){let t=String(e.key),n=e;for(;n.parent;)n=n.parent,t=`${n.key} > ${t}`;return t}const jo=Ce({compatConfig:{MODE:3},name:"NodeList",inheritAttrs:!1,props:ko,setup(e,t){let{expose:n,attrs:o}=t;const a=ie(),r=ie(),{expandedKeys:l,flattenNodes:i}=pn();n({scrollTo:m=>{a.value.scrollTo(m)},getIndentWidth:()=>r.value.offsetWidth});const y=W(i.value),h=W([]),p=ie(null);function f(){y.value=i.value,h.value=[],p.value=null,e.onListChangeEnd()}const S=Et();ce([()=>l.value.slice(),i],(m,d)=>{let[k,O]=m,[K,E]=d;const x=Lo(K,k);if(x.key!==null){const{virtual:C,height:T,itemHeight:M}=e;if(x.add){const c=E.findIndex(Y=>{let{key:G}=Y;return G===x.key}),_=Yt(Gt(E,O,x.key),C,T,M),B=E.slice();B.splice(c+1,0,Xt),y.value=B,h.value=_,p.value="show"}else{const c=O.findIndex(Y=>{let{key:G}=Y;return G===x.key}),_=Yt(Gt(O,E,x.key),C,T,M),B=O.slice();B.splice(c+1,0,Xt),y.value=B,h.value=_,p.value="hide"}}else E!==O&&(y.value=O)}),ce(()=>S.value.dragging,m=>{m||f()});const w=I(()=>e.motion===void 0?y.value:i.value),P=()=>{e.onActiveChange(null)};return()=>{const m=$($({},e),o),{prefixCls:d,selectable:k,checkable:O,disabled:K,motion:E,height:x,itemHeight:C,virtual:T,focusable:M,activeItem:c,focused:_,tabindex:B,onKeydown:Y,onFocus:G,onBlur:Z,onListChangeStart:J,onListChangeEnd:de}=m,te=qt(m,["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"]);return L(bt,null,[_&&c&&L("span",{style:Wt,"aria-live":"assertive"},[Mo(c)]),L("div",null,[L("input",{style:Wt,disabled:M===!1||K,tabindex:M!==!1?B:null,onKeydown:Y,onFocus:G,onBlur:Z,value:"",onChange:Ao,"aria-label":"for screen reader"},null)]),L("div",{class:`${d}-treenode`,"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[L("div",{class:`${d}-indent`},[L("div",{ref:r,class:`${d}-indent-unit`},null)])]),L(fo,ee(ee({},wt(te,["onActiveChange"])),{},{data:w.value,itemKey:Qt,height:x,fullHeight:!1,virtual:T,itemHeight:C,prefixCls:`${d}-list`,ref:a,onVisibleChange:(j,ue)=>{const X=new Set(j);ue.filter(se=>!X.has(se)).some(se=>Qt(se)===Ne)&&f()}}),{default:j=>{const{pos:ue}=j,X=qt(j.data,[]),{title:ae,key:se,isStart:pe,isEnd:Oe}=j,Pe=je(se,ue);return delete X.key,delete X.children,L(Io,ee(ee({},X),{},{eventKey:Pe,title:ae,active:!!c&&se===c.key,data:j.data,isStart:pe,isEnd:Oe,motion:E,motionNodes:se===Ne?h.value:null,motionType:p.value,onMotionStart:J,onMotionEnd:f,onMousemove:P}),null)}})])}}});function Fo(e){let{dropPosition:t,dropLevelOffset:n,indent:o}=e;const a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"2px"};switch(t){case-1:a.top=0,a.left=`${-n*o}px`;break;case 1:a.bottom=0,a.left=`${-n*o}px`;break;case 0:a.bottom=0,a.left=`${o}`;break}return L("div",{style:a},null)}const Bo=10,Ho=Ce({compatConfig:{MODE:3},name:"Tree",inheritAttrs:!1,props:Ot(bn(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,expandAction:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Fo,allowDrop:()=>!0}),setup(e,t){let{attrs:n,slots:o,expose:a}=t;const r=W(!1);let l={};const i=W(),y=W([]),h=W([]),p=W([]),f=W([]),S=W([]),w=W([]),P={},m=cn({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),d=W([]);ce([()=>e.treeData,()=>e.children],()=>{d.value=e.treeData!==void 0?e.treeData.slice():xt(Lt(e.children))},{immediate:!0,deep:!0});const k=W({}),O=W(!1),K=W(null),E=W(!1),x=I(()=>Qe(e.fieldNames)),C=W();let T=null,M=null,c=null;const _=I(()=>({expandedKeysSet:B.value,selectedKeysSet:Y.value,loadedKeysSet:G.value,loadingKeysSet:Z.value,checkedKeysSet:J.value,halfCheckedKeysSet:de.value,dragOverNodeKey:m.dragOverNodeKey,dropPosition:m.dropPosition,keyEntities:k.value})),B=I(()=>new Set(w.value)),Y=I(()=>new Set(y.value)),G=I(()=>new Set(f.value)),Z=I(()=>new Set(S.value)),J=I(()=>new Set(h.value)),de=I(()=>new Set(p.value));we(()=>{if(d.value){const u=kn(d.value,{fieldNames:x.value});k.value=$({[Ne]:xn},u.keyEntities)}});let te=!1;ce([()=>e.expandedKeys,()=>e.autoExpandParent,k],(u,v)=>{let[b,D]=u,[F,A]=v,N=w.value;if(e.expandedKeys!==void 0||te&&D!==A)N=e.autoExpandParent||!te&&e.defaultExpandParent?Kt(e.expandedKeys,k.value):e.expandedKeys;else if(!te&&e.defaultExpandAll){const R=$({},k.value);delete R[Ne],N=Object.keys(R).map(q=>R[q].key)}else!te&&e.defaultExpandedKeys&&(N=e.autoExpandParent||e.defaultExpandParent?Kt(e.defaultExpandedKeys,k.value):e.defaultExpandedKeys);N&&(w.value=N),te=!0},{immediate:!0});const j=W([]);we(()=>{j.value=No(d.value,w.value,x.value)}),we(()=>{e.selectable&&(e.selectedKeys!==void 0?y.value=Vt(e.selectedKeys,e):!te&&e.defaultSelectedKeys&&(y.value=Vt(e.defaultSelectedKeys,e)))});const{maxLevel:ue,levelEntities:X}=To(k);we(()=>{if(e.checkable){let u;if(e.checkedKeys!==void 0?u=vt(e.checkedKeys)||{}:!te&&e.defaultCheckedKeys?u=vt(e.defaultCheckedKeys)||{}:d.value&&(u=vt(e.checkedKeys)||{checkedKeys:h.value,halfCheckedKeys:p.value}),u){let{checkedKeys:v=[],halfCheckedKeys:b=[]}=u;e.checkStrictly||({checkedKeys:v,halfCheckedKeys:b}=yt(v,!0,k.value,ue.value,X.value)),h.value=v,p.value=b}}}),we(()=>{e.loadedKeys&&(f.value=e.loadedKeys)});const ae=()=>{$(m,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},se=u=>{C.value.scrollTo(u)};ce(()=>e.activeKey,()=>{e.activeKey!==void 0&&(K.value=e.activeKey)},{immediate:!0}),ce(K,u=>{Ct(()=>{u!==null&&se({key:u})})},{immediate:!0,flush:"post"});const pe=u=>{e.expandedKeys===void 0&&(w.value=u)},Oe=()=>{m.draggingNodeKey!==null&&$(m,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),T=null,c=null},Pe=(u,v)=>{const{onDragend:b}=e;m.dragOverNodeKey=null,Oe(),b?.({event:u,node:v.eventData}),M=null},Ie=u=>{Pe(u,null),window.removeEventListener("dragend",Ie)},Je=(u,v)=>{const{onDragstart:b}=e,{eventKey:D,eventData:F}=v;M=v,T={x:u.clientX,y:u.clientY};const A=be(w.value,D);m.draggingNodeKey=D,m.dragChildrenKeys=wo(D,k.value),i.value=C.value.getIndentWidth(),pe(A),window.addEventListener("dragend",Ie),b&&b({event:u,node:F})},et=(u,v)=>{const{onDragenter:b,onExpand:D,allowDrop:F,direction:A}=e,{pos:N,eventKey:R}=v;if(c!==R&&(c=R),!M){ae();return}const{dropPosition:q,dropLevelOffset:H,dropTargetKey:z,dropContainerKey:U,dropTargetPos:le,dropAllowed:ge,dragOverNodeKey:fe}=zt(u,M,v,i.value,T,F,j.value,k.value,B.value,A);if(m.dragChildrenKeys.indexOf(z)!==-1||!ge){ae();return}if(l||(l={}),Object.keys(l).forEach(re=>{clearTimeout(l[re])}),M.eventKey!==v.eventKey&&(l[N]=window.setTimeout(()=>{if(m.draggingNodeKey===null)return;let re=w.value.slice();const Ke=k.value[v.eventKey];Ke&&(Ke.children||[]).length&&(re=Se(w.value,v.eventKey)),pe(re),D&&D(re,{node:v.eventData,expanded:!0,nativeEvent:u})},800)),M.eventKey===z&&H===0){ae();return}$(m,{dragOverNodeKey:fe,dropPosition:q,dropLevelOffset:H,dropTargetKey:z,dropContainerKey:U,dropTargetPos:le,dropAllowed:ge}),b&&b({event:u,node:v.eventData,expandedKeys:w.value})},tt=(u,v)=>{const{onDragover:b,allowDrop:D,direction:F}=e;if(!M)return;const{dropPosition:A,dropLevelOffset:N,dropTargetKey:R,dropContainerKey:q,dropAllowed:H,dropTargetPos:z,dragOverNodeKey:U}=zt(u,M,v,i.value,T,D,j.value,k.value,B.value,F);m.dragChildrenKeys.indexOf(R)!==-1||!H||(M.eventKey===R&&N===0?m.dropPosition===null&&m.dropLevelOffset===null&&m.dropTargetKey===null&&m.dropContainerKey===null&&m.dropTargetPos===null&&m.dropAllowed===!1&&m.dragOverNodeKey===null||ae():A===m.dropPosition&&N===m.dropLevelOffset&&R===m.dropTargetKey&&q===m.dropContainerKey&&z===m.dropTargetPos&&H===m.dropAllowed&&U===m.dragOverNodeKey||$(m,{dropPosition:A,dropLevelOffset:N,dropTargetKey:R,dropContainerKey:q,dropTargetPos:z,dropAllowed:H,dragOverNodeKey:U}),b&&b({event:u,node:v.eventData}))},nt=(u,v)=>{c===v.eventKey&&!u.currentTarget.contains(u.relatedTarget)&&(ae(),c=null);const{onDragleave:b}=e;b&&b({event:u,node:v.eventData})},ot=function(u,v){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var D;const{dragChildrenKeys:F,dropPosition:A,dropTargetKey:N,dropTargetPos:R,dropAllowed:q}=m;if(!q)return;const{onDrop:H}=e;if(m.dragOverNodeKey=null,Oe(),N===null)return;const z=$($({},qe(N,Lt(_.value))),{active:((D=V.value)===null||D===void 0?void 0:D.key)===N,data:k.value[N].node});F.indexOf(N);const U=Nt(R),le={event:u,node:We(z),dragNode:M?M.eventData:null,dragNodesKeys:[M.eventKey].concat(F),dropToGap:A!==0,dropPosition:A+Number(U[U.length-1])};b||H?.(le),M=null},Fe=(u,v)=>{const{expanded:b,key:D}=v,F=j.value.filter(N=>N.key===D)[0],A=We($($({},qe(D,_.value)),{data:F.data}));pe(b?be(w.value,D):Se(w.value,D)),Ee(u,A)},at=(u,v)=>{const{onClick:b,expandAction:D}=e;D==="click"&&Fe(u,v),b&&b(u,v)},lt=(u,v)=>{const{onDblclick:b,expandAction:D}=e;(D==="doubleclick"||D==="dblclick")&&Fe(u,v),b&&b(u,v)},Be=(u,v)=>{let b=y.value;const{onSelect:D,multiple:F}=e,{selected:A}=v,N=v[x.value.key],R=!A;R?F?b=Se(b,N):b=[N]:b=be(b,N);const q=k.value,H=b.map(z=>{const U=q[z];return U?U.node:null}).filter(z=>z);e.selectedKeys===void 0&&(y.value=b),D&&D(b,{event:"select",selected:R,node:v,selectedNodes:H,nativeEvent:u})},He=(u,v,b)=>{const{checkStrictly:D,onCheck:F}=e,A=v[x.value.key];let N;const R={event:"check",node:v,checked:b,nativeEvent:u},q=k.value;if(D){const H=b?Se(h.value,A):be(h.value,A),z=be(p.value,A);N={checked:H,halfChecked:z},R.checkedNodes=H.map(U=>q[U]).filter(U=>U).map(U=>U.node),e.checkedKeys===void 0&&(h.value=H)}else{let{checkedKeys:H,halfCheckedKeys:z}=yt([...h.value,A],!0,q,ue.value,X.value);if(!b){const U=new Set(H);U.delete(A),{checkedKeys:H,halfCheckedKeys:z}=yt(Array.from(U),{halfCheckedKeys:z},q,ue.value,X.value)}N=H,R.checkedNodes=[],R.checkedNodesPositions=[],R.halfCheckedKeys=z,H.forEach(U=>{const le=q[U];if(!le)return;const{node:ge,pos:fe}=le;R.checkedNodes.push(ge),R.checkedNodesPositions.push({node:ge,pos:fe})}),e.checkedKeys===void 0&&(h.value=H,p.value=z)}F&&F(N,R)},Re=u=>{const v=u[x.value.key],b=new Promise((D,F)=>{const{loadData:A,onLoad:N}=e;if(!A||G.value.has(v)||Z.value.has(v))return null;A(u).then(()=>{const q=Se(f.value,v),H=be(S.value,v);N&&N(q,{event:"load",node:u}),e.loadedKeys===void 0&&(f.value=q),S.value=H,D()}).catch(q=>{const H=be(S.value,v);if(S.value=H,P[v]=(P[v]||0)+1,P[v]>=Bo){const z=Se(f.value,v);e.loadedKeys===void 0&&(f.value=z),D()}F(q)}),S.value=Se(S.value,v)});return b.catch(()=>{}),b},rt=(u,v)=>{const{onMouseenter:b}=e;b&&b({event:u,node:v})},ze=(u,v)=>{const{onMouseleave:b}=e;b&&b({event:u,node:v})},it=(u,v)=>{const{onRightClick:b}=e;b&&(u.preventDefault(),b({event:u,node:v}))},st=u=>{const{onFocus:v}=e;O.value=!0,v&&v(u)},Ve=u=>{const{onBlur:v}=e;O.value=!1,g(null),v&&v(u)},Ee=(u,v)=>{let b=w.value;const{onExpand:D,loadData:F}=e,{expanded:A}=v,N=v[x.value.key];if(E.value)return;b.indexOf(N);const R=!A;if(R?b=Se(b,N):b=be(b,N),pe(b),D&&D(b,{node:v,expanded:R,nativeEvent:u}),R&&F){const q=Re(v);q&&q.then(()=>{}).catch(H=>{const z=be(w.value,N);pe(z),Promise.reject(H)})}},ct=()=>{E.value=!0},s=()=>{setTimeout(()=>{E.value=!1})},g=u=>{const{onActiveChange:v}=e;K.value!==u&&(e.activeKey!==void 0&&(K.value=u),u!==null&&se({key:u}),v&&v(u))},V=I(()=>K.value===null?null:j.value.find(u=>{let{key:v}=u;return v===K.value})||null),Q=u=>{let v=j.value.findIndex(D=>{let{key:F}=D;return F===K.value});v===-1&&u<0&&(v=j.value.length),v=(v+u+j.value.length)%j.value.length;const b=j.value[v];if(b){const{key:D}=b;g(D)}else g(null)},ne=I(()=>We($($({},qe(K.value,_.value)),{data:V.value.data,active:!0}))),oe=u=>{const{onKeydown:v,checkable:b,selectable:D}=e;switch(u.which){case De.UP:{Q(-1),u.preventDefault();break}case De.DOWN:{Q(1),u.preventDefault();break}}const F=V.value;if(F&&F.data){const A=F.data.isLeaf===!1||!!(F.data.children||[]).length,N=ne.value;switch(u.which){case De.LEFT:{A&&B.value.has(K.value)?Ee({},N):F.parent&&g(F.parent.key),u.preventDefault();break}case De.RIGHT:{A&&!B.value.has(K.value)?Ee({},N):F.children&&F.children.length&&g(F.children[0].key),u.preventDefault();break}case De.ENTER:case De.SPACE:{b&&!N.disabled&&N.checkable!==!1&&!N.disableCheckbox?He({},N,!J.value.has(K.value)):!b&&D&&!N.disabled&&N.selectable!==!1&&Be({},N);break}}}v&&v(u)};return a({onNodeExpand:Ee,scrollTo:se,onKeydown:oe,selectedKeys:I(()=>y.value),checkedKeys:I(()=>h.value),halfCheckedKeys:I(()=>p.value),loadedKeys:I(()=>f.value),loadingKeys:I(()=>S.value),expandedKeys:I(()=>w.value)}),Vn(()=>{window.removeEventListener("dragend",Ie),r.value=!0}),bo({expandedKeys:w,selectedKeys:y,loadedKeys:f,loadingKeys:S,checkedKeys:h,halfCheckedKeys:p,expandedKeysSet:B,selectedKeysSet:Y,loadedKeysSet:G,loadingKeysSet:Z,checkedKeysSet:J,halfCheckedKeysSet:de,flattenNodes:j}),()=>{const{draggingNodeKey:u,dropLevelOffset:v,dropContainerKey:b,dropTargetKey:D,dropPosition:F,dragOverNodeKey:A}=m,{prefixCls:N,showLine:R,focusable:q,tabindex:H=0,selectable:z,showIcon:U,icon:le=o.icon,switcherIcon:ge,draggable:fe,checkable:re,checkStrictly:Ke,disabled:Le,motion:dt,loadData:wn,filterTreeNode:Cn,height:On,itemHeight:En,virtual:Nn,dropIndicatorRender:Pn,onContextmenu:Dn,onScroll:$n,direction:_n,rootClassName:Tn,rootStyle:In}=e,{class:Ln,style:An}=n,Mn=fn($($({},e),n),{aria:!0,data:!0});let Ae;return fe?typeof fe=="object"?Ae=fe:typeof fe=="function"?Ae={nodeDraggable:fe}:Ae={}:Ae=!1,L(go,{value:{prefixCls:N,selectable:z,showIcon:U,icon:le,switcherIcon:ge,draggable:Ae,draggingNodeKey:u,checkable:re,customCheckable:o.checkable,checkStrictly:Ke,disabled:Le,keyEntities:k.value,dropLevelOffset:v,dropContainerKey:b,dropTargetKey:D,dropPosition:F,dragOverNodeKey:A,dragging:u!==null,indent:i.value,direction:_n,dropIndicatorRender:Pn,loadData:wn,filterTreeNode:Cn,onNodeClick:at,onNodeDoubleClick:lt,onNodeExpand:Ee,onNodeSelect:Be,onNodeCheck:He,onNodeLoad:Re,onNodeMouseEnter:rt,onNodeMouseLeave:ze,onNodeContextMenu:it,onNodeDragStart:Je,onNodeDragEnter:et,onNodeDragOver:tt,onNodeDragLeave:nt,onNodeDragEnd:Pe,onNodeDrop:ot,slots:o}},{default:()=>[L("div",{role:"tree",class:he(N,Ln,Tn,{[`${N}-show-line`]:R,[`${N}-focused`]:O.value,[`${N}-active-focused`]:K.value!==null}),style:In},[L(jo,ee({ref:C,prefixCls:N,style:An,disabled:Le,selectable:z,checkable:!!re,motion:dt,height:On,itemHeight:En,virtual:Nn,focusable:q,focused:O.value,tabindex:H,activeItem:V.value,onFocus:st,onBlur:Ve,onKeydown:oe,onActiveChange:g,onListChangeStart:ct,onListChangeEnd:s,onContextmenu:Dn,onScroll:$n},Mn),null)])]})}}});var Ro={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};function Zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){zo(e,a,n[a])})}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze=function(t,n){var o=Zt({},t,n.attrs);return L(Te,Zt({},o,{icon:Ro}),null)};Ze.displayName="FileOutlined";Ze.inheritAttrs=!1;var Vo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};function Jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){Uo(e,a,n[a])})}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pt=function(t,n){var o=Jt({},t,n.attrs);return L(Te,Jt({},o,{icon:Vo}),null)};Pt.displayName="MinusSquareOutlined";Pt.inheritAttrs=!1;var Go={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};function en(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){qo(e,a,n[a])})}return e}function qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dt=function(t,n){var o=en({},t,n.attrs);return L(Te,en({},o,{icon:Go}),null)};Dt.displayName="PlusSquareOutlined";Dt.inheritAttrs=!1;var Wo={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};function tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){Xo(e,a,n[a])})}return e}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(t,n){var o=tn({},t,n.attrs);return L(Te,tn({},o,{icon:Wo}),null)};$t.displayName="CaretDownFilled";$t.inheritAttrs=!1;function Yo(e,t,n,o,a){const{isLeaf:r,expanded:l,loading:i}=n;let y=t;if(i)return L(Un,{class:`${e}-switcher-loading-icon`},null);let h;a&&typeof a=="object"&&(h=a.showLeafIcon);let p=null;const f=`${e}-switcher-icon`;return r?a?h&&o?o(n):(typeof a=="object"&&!h?p=L("span",{class:`${e}-switcher-leaf-line`},null):p=L(Ze,{class:`${e}-switcher-line-icon`},null),p):null:(p=L($t,{class:f},null),a&&(p=l?L(Pt,{class:`${e}-switcher-line-icon`},null):L(Dt,{class:`${e}-switcher-line-icon`},null)),typeof t=="function"?y=t($($({},n),{defaultIcon:p,switcherCls:f})):Gn(y)&&(y=qn(y,{class:f})),y||p)}const nn=4;function Qo(e){const{dropPosition:t,dropLevelOffset:n,prefixCls:o,indent:a,direction:r="ltr"}=e,l=r==="ltr"?"left":"right",i=r==="ltr"?"right":"left",y={[l]:`${-n*a+nn}px`,[i]:0};switch(t){case-1:y.top="-3px";break;case 1:y.bottom="-3px";break;default:y.bottom="-3px",y[l]=`${a+nn}px`;break}return L("div",{style:y,class:`${o}-drop-indicator`},null)}const Zo=new Qn("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),Jo=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),ea=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${t.lineWidthBold}px solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),ta=(e,t)=>{const{treeCls:n,treeNodeCls:o,treeNodePadding:a,treeTitleHeight:r}=t,l=(r-t.fontSizeLG)/2,i=t.paddingXS;return{[n]:$($({},Yn(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,[`&${n}-rtl`]:{[`${n}-switcher`]:{"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${n}-active-focused)`]:$({},At(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${o}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:a,insetInlineStart:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:Zo,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${o}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${a}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${n}-node-content-wrapper`]:$({},At(t)),[`&:not(${o}-disabled).filter-node ${n}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${n}-draggable-icon`]:{width:r,lineHeight:`${r}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${t.motionDurationSlow}`,[`${o}:hover &`]:{opacity:.45}},[`&${o}-disabled`]:{[`${n}-draggable-icon`]:{visibility:"hidden"}}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:r}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher`]:$($({},Jo(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:r,margin:0,lineHeight:`${r}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${n}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:r/2,bottom:-a,marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:r/2*.8,height:r/2,borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-checkbox`]:{top:"initial",marginInlineEnd:i,marginBlockStart:l},[`${n}-node-content-wrapper, ${n}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:r,margin:0,padding:`0 ${t.paddingXS/2}px`,color:"inherit",lineHeight:`${r}px`,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:t.controlItemBgHover},[`&${n}-node-selected`]:{backgroundColor:t.controlItemBgActive},[`${n}-iconEle`]:{display:"inline-block",width:r,height:r,lineHeight:`${r}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${n}-node-content-wrapper`]:$({lineHeight:`${r}px`,userSelect:"none"},ea(e,t)),[`${o}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${t.colorPrimary}`}},"&-show-line":{[`${n}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:r/2,bottom:-a,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${o}-leaf-last`]:{[`${n}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${r/2}px !important`}}}}})}},na=e=>{const{treeCls:t,treeNodeCls:n,treeNodePadding:o}=e;return{[`${t}${t}-directory`]:{[n]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:o,insetInlineStart:0,transition:`background-color ${e.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:e.controlItemBgHover}},"> *":{zIndex:1},[`${t}-switcher`]:{transition:`color ${e.motionDurationMid}`},[`${t}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${t}-node-selected`]:{color:e.colorTextLightSolid,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:e.colorPrimary},[`${t}-switcher`]:{color:e.colorTextLightSolid},[`${t}-node-content-wrapper`]:{color:e.colorTextLightSolid,background:"transparent"}}}}}},oa=(e,t)=>{const n=`.${e}`,o=`${n}-treenode`,a=t.paddingXS/2,r=t.controlHeightSM,l=Xn(t,{treeCls:n,treeNodeCls:o,treeNodePadding:a,treeTitleHeight:r});return[ta(e,l),na(l)]},aa=Wn("Tree",(e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:ho(`${n}-checkbox`,e)},oa(n,e),yo(e)]}),Sn=()=>{const e=bn();return $($({},e),{showLine:mt([Boolean,Object]),multiple:ve(),autoExpandParent:ve(),checkStrictly:ve(),checkable:ve(),disabled:ve(),defaultExpandAll:ve(),defaultExpandParent:ve(),defaultExpandedKeys:$e(),expandedKeys:$e(),checkedKeys:mt([Array,Object]),defaultCheckedKeys:$e(),selectedKeys:$e(),defaultSelectedKeys:$e(),selectable:ve(),loadedKeys:$e(),draggable:ve(),showIcon:ve(),icon:Ue(),switcherIcon:ke.any,prefixCls:String,replaceFields:Jn(),blockNode:ve(),openAnimation:ke.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Ue(),"onUpdate:checkedKeys":Ue(),"onUpdate:expandedKeys":Ue()})},Xe=Ce({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:Ot(Sn(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(e,t){let{attrs:n,expose:o,emit:a,slots:r}=t;sn(!(e.treeData===void 0&&r.default));const{prefixCls:l,direction:i,virtual:y}=vn("tree",e),[h,p]=aa(l),f=ie();o({treeRef:f,onNodeExpand:function(){var d;(d=f.value)===null||d===void 0||d.onNodeExpand(...arguments)},scrollTo:d=>{var k;(k=f.value)===null||k===void 0||k.scrollTo(d)},selectedKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.selectedKeys}),checkedKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.checkedKeys}),halfCheckedKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.halfCheckedKeys}),loadedKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.loadedKeys}),loadingKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.loadingKeys}),expandedKeys:I(()=>{var d;return(d=f.value)===null||d===void 0?void 0:d.expandedKeys})}),we(()=>{Zn(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});const w=(d,k)=>{a("update:checkedKeys",d),a("check",d,k)},P=(d,k)=>{a("update:expandedKeys",d),a("expand",d,k)},m=(d,k)=>{a("update:selectedKeys",d),a("select",d,k)};return()=>{const{showIcon:d,showLine:k,switcherIcon:O=r.switcherIcon,icon:K=r.icon,blockNode:E,checkable:x,selectable:C,fieldNames:T=e.replaceFields,motion:M=e.openAnimation,itemHeight:c=28,onDoubleclick:_,onDblclick:B}=e,Y=$($($({},n),wt(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:!!k,dropIndicatorRender:Qo,fieldNames:T,icon:K,itemHeight:c}),G=r.default?Ye(r.default()):void 0;return h(L(Ho,ee(ee({},Y),{},{virtual:y.value,motion:M,ref:f,prefixCls:l.value,class:he({[`${l.value}-icon-hide`]:!d,[`${l.value}-block-node`]:E,[`${l.value}-unselectable`]:!C,[`${l.value}-rtl`]:i.value==="rtl"},n.class,p.value),direction:i.value,checkable:x,selectable:C,switcherIcon:Z=>Yo(l.value,O,Z,r.leafIcon,k),onCheck:w,onExpand:P,onSelect:m,onDblclick:B||_,children:G}),$($({},r),{checkable:()=>L("span",{class:`${l.value}-checkbox-inner`},null)})))}}});var la={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function on(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){ra(e,a,n[a])})}return e}function ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=function(t,n){var o=on({},t,n.attrs);return L(Te,on({},o,{icon:la}),null)};_t.displayName="FolderOpenOutlined";_t.inheritAttrs=!1;var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},o=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),o.forEach(function(a){sa(e,a,n[a])})}return e}function sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=function(t,n){var o=an({},t,n.attrs);return L(Te,an({},o,{icon:ia}),null)};Tt.displayName="FolderOutlined";Tt.inheritAttrs=!1;var me;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(me||(me={}));function It(e,t,n){function o(a){const r=a[t.key],l=a[t.children];n(r,a)!==!1&&It(l||[],t,n)}e.forEach(o)}function ca(e){let{treeData:t,expandedKeys:n,startKey:o,endKey:a,fieldNames:r={title:"title",key:"key",children:"children"}}=e;const l=[];let i=me.None;if(o&&o===a)return[o];if(!o||!a)return[];function y(h){return h===o||h===a}return It(t,r,h=>{if(i===me.End)return!1;if(y(h)){if(l.push(h),i===me.None)i=me.Start;else if(i===me.Start)return i=me.End,!1}else i===me.Start&&l.push(h);return n.includes(h)}),l}function ht(e,t,n){const o=[...t],a=[];return It(e,n,(r,l)=>{const i=o.indexOf(r);return i!==-1&&(a.push(l),o.splice(i,1)),!!o.length}),a}var da=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const ua=()=>$($({},Sn()),{expandAction:mt([Boolean,String])});function fa(e){const{isLeaf:t,expanded:n}=e;return t?L(Ze,null,null):n?L(_t,null,null):L(Tt,null,null)}const pt=Ce({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:Ot(ua(),{showIcon:!0,expandAction:"click"}),slots:Object,setup(e,t){let{attrs:n,slots:o,emit:a,expose:r}=t;var l;const i=ie(e.treeData||xt(Ye((l=o.default)===null||l===void 0?void 0:l.call(o))));ce(()=>e.treeData,()=>{i.value=e.treeData}),un(()=>{Ct(()=>{var c;e.treeData===void 0&&o.default&&(i.value=xt(Ye((c=o.default)===null||c===void 0?void 0:c.call(o))))})});const y=ie(),h=ie(),p=I(()=>Qe(e.fieldNames)),f=ie();r({scrollTo:c=>{var _;(_=f.value)===null||_===void 0||_.scrollTo(c)},selectedKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.selectedKeys}),checkedKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.checkedKeys}),halfCheckedKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.halfCheckedKeys}),loadedKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.loadedKeys}),loadingKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.loadingKeys}),expandedKeys:I(()=>{var c;return(c=f.value)===null||c===void 0?void 0:c.expandedKeys})});const w=()=>{const{keyEntities:c}=kn(i.value,{fieldNames:p.value});let _;return e.defaultExpandAll?_=Object.keys(c):e.defaultExpandParent?_=Kt(e.expandedKeys||e.defaultExpandedKeys||[],c):_=e.expandedKeys||e.defaultExpandedKeys,_},P=ie(e.selectedKeys||e.defaultSelectedKeys||[]),m=ie(w());ce(()=>e.selectedKeys,()=>{e.selectedKeys!==void 0&&(P.value=e.selectedKeys)},{immediate:!0}),ce(()=>e.expandedKeys,()=>{e.expandedKeys!==void 0&&(m.value=e.expandedKeys)},{immediate:!0});const k=po((c,_)=>{const{isLeaf:B}=_;B||c.shiftKey||c.metaKey||c.ctrlKey||f.value.onNodeExpand(c,_)},200,{leading:!0}),O=(c,_)=>{e.expandedKeys===void 0&&(m.value=c),a("update:expandedKeys",c),a("expand",c,_)},K=(c,_)=>{const{expandAction:B}=e;B==="click"&&k(c,_),a("click",c,_)},E=(c,_)=>{const{expandAction:B}=e;(B==="dblclick"||B==="doubleclick")&&k(c,_),a("doubleclick",c,_),a("dblclick",c,_)},x=(c,_)=>{const{multiple:B}=e,{node:Y,nativeEvent:G}=_,Z=Y[p.value.key],J=$($({},_),{selected:!0}),de=G?.ctrlKey||G?.metaKey,te=G?.shiftKey;let j;B&&de?(j=c,y.value=Z,h.value=j,J.selectedNodes=ht(i.value,j,p.value)):B&&te?(j=Array.from(new Set([...h.value||[],...ca({treeData:i.value,expandedKeys:m.value,startKey:Z,endKey:y.value,fieldNames:p.value})])),J.selectedNodes=ht(i.value,j,p.value)):(j=[Z],y.value=Z,h.value=j,J.selectedNodes=ht(i.value,j,p.value)),a("update:selectedKeys",j),a("select",j,J),e.selectedKeys===void 0&&(P.value=j)},C=(c,_)=>{a("update:checkedKeys",c),a("check",c,_)},{prefixCls:T,direction:M}=vn("tree",e);return()=>{const c=he(`${T.value}-directory`,{[`${T.value}-directory-rtl`]:M.value==="rtl"},n.class),{icon:_=o.icon,blockNode:B=!0}=e,Y=da(e,["icon","blockNode"]);return L(Xe,ee(ee(ee({},n),{},{icon:_||fa,ref:f,blockNode:B},Y),{},{prefixCls:T.value,class:c,expandedKeys:m.value,selectedKeys:P.value,onSelect:x,onClick:K,onDblclick:E,onExpand:O,onCheck:C}),o)}}}),gt=kt,va=$(Xe,{DirectoryTree:pt,TreeNode:gt,install:e=>(e.component(Xe.name,Xe),e.component(gt.name,gt),e.component(pt.name,pt),e)}),ya=["onClick","onDblclick"],ha=["innerHTML"],pa=["innerHTML"],Ca=Ce({__name:"tree",props:{data:{},ops:{default:()=>[]},checkable:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},checkedKeys:{default:()=>[]},search:{type:Boolean,default:!1}},emits:["left-click","right-click","update:checkedKeys","double-click"],setup(e,{emit:t}){const n=e,o=t,a=ie(""),r=ie(m("expanded")),l=ie([...n.checkedKeys]),i=ie(new Set);ce(l,O=>{o("update:checkedKeys",O)}),ce(()=>n.checkedKeys,O=>{l.value=O||[]});const y=I(()=>P()),h=I(()=>!a.value||!n.search?y.value:p(y.value,a.value.toLowerCase()));function p(O,K){const E=[];return O.forEach(x=>{const C={...x},T=p(x.children,K);(x.title.toLowerCase().includes(K)||T.length>0)&&(C.children=T,E.push(C),x.title.toLowerCase().includes(K)&&i.value.add(x.key))}),E}function f(O,K){if(!K)return O;const E=new RegExp(K,"gi");return O.replace(E,x=>`<span style="color: #f50; font-weight: bold">${x}</span>`)}function S(){if(a.value){const O=a.value.toLowerCase();i.value=new Set;const K=new Set;p(y.value,O);const E=(C,T,M=[])=>{C.forEach(c=>{T.has(c.key)&&M.forEach(_=>K.add(_)),E(c.children,T,[...M,c.key])})};E(y.value,i.value);const x=new Set([...r.value,...K]);r.value=Array.from(x)}else r.value=m("expanded"),i.value=new Set}const w=(O,K,E)=>{O.stopPropagation(),o("double-click",K,E)};function P(){const O=[],K={};Object.keys(n.data).forEach(x=>{const C=n.data[x];C&&(K[x]={key:x,title:C.name,icon:C.icon,color:C.color,expanded:C.expanded,checked:C.checked,children:[]},C.hasOwnProperty("rank")&&(K[x].rank=C.rank),C.hasOwnProperty("hover")&&(K[x].hover=C.hover),C.hasOwnProperty("remark")&&(K[x].remark=C.remark),C.hasOwnProperty("size")?K[x].size=C.size:K[x].size=1)}),Object.keys(K).forEach(x=>{const C=K[x];if(!C)return;const T=n.data[x]?.parent_id,M=T?K[T]:void 0;M?M.children.push(C):O.push(C)});const E=x=>{!x||!x.length||(x.sort((C,T)=>!C||!T?0:C.hasOwnProperty("rank")&&T.hasOwnProperty("rank")?(C.rank??0)<(T.rank??0)?-1:1:C.children.length==0&&T.children.length!=0?1:C.children.length!=0&&T.children.length==0?-1:C.title.localeCompare(T.title)),x.forEach(C=>{C&&E(C.children)}))};return E(O),O}function m(O){const K=[];for(let E in n.data)n.data[E]&&n.data[E][O]&&K.push(E);return K}const d=(O,K,E,x,C)=>{let T="fa fa-";return O?T+=O:ft.isEmpty(E)?T+="file":(T+="folder",x&&(T+="-open")),K&&(T+=" text-"+K),T},k=(O,K,E)=>{if(O.stopPropagation(),ft.isEmpty(E)){o("left-click",K);return}const x=[...r.value],C=x.indexOf(K);C>-1?x.splice(C,1):x.push(K),r.value=x};return(O,K)=>{const E=eo,x=uo,C=co,T=so,M=va;return xe(),Me("div",null,[e.search?(xe(),ut(E,{key:0,value:a.value,"onUpdate:value":K[0]||(K[0]=c=>a.value=c),placeholder:"",style:{"margin-bottom":"8px"},onSearch:S},null,8,["value"])):Mt("",!0),L(M,{"tree-data":h.value,checkable:e.checkable,checkStrictly:e.checkStrictly,checkedKeys:l.value,"onUpdate:checkedKeys":K[1]||(K[1]=c=>l.value=c),expandedKeys:r.value,"onUpdate:expandedKeys":K[2]||(K[2]=c=>r.value=c)},{title:_e(({key:c,title:_,remark:B,icon:Y,color:G,children:Z,expanded:J,size:de,hover:te})=>[(xe(),ut(to(te?io:"span"),no(oo(te?{msg:te,icon:!1,placement:"right"}:{})),{default:_e(()=>[L(T,{trigger:["contextmenu"]},{overlay:_e(()=>[L(C,null,{default:_e(()=>[(xe(!0),Me(bt,null,ro(e.ops,(j,ue)=>(xe(),ut(x,{key:ue,onClick:X=>o("right-click",c,j.op)},{default:_e(()=>[Ge("i",{style:{"margin-right":"0.5rem"},class:jt(`fa fa-${j.icon}`)},null,2),Ft(Bt(j.title),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:_e(()=>[Ge("span",{onClick:j=>k(j,c,Z??[]),onDblclick:j=>w(j,c,Z??[])},[Ge("span",{style:{width:"1rem","margin-right":"0.5rem"},class:jt(d(Y,G,Z??[],J,de))},null,2),Ge("span",{style:ao({fontSize:de+"rem",fontWeight:lo(ft.isEmpty)(Z)?"normal":"bold"})},[a.value?(xe(),Me("span",{key:0,innerHTML:f(_,a.value)},null,8,ha)):(xe(),Me(bt,{key:1},[Ft(Bt(_),1)],64))],4),B?(xe(),Me("span",{key:0,innerHTML:B},null,8,pa)):Mt("",!0)],40,ya)]),_:2},1024)]),_:2},1040))]),_:1},8,["tree-data","checkable","checkStrictly","checkedKeys","expandedKeys"])])}}});export{Ca as _};
